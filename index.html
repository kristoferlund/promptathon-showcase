<!doctype html>
<html lang="en" class="bg-background">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <meta name="description" content="{{description}}" />
    <meta property="og:title" content="{{title}}" />
    <meta property="og:description" content="{{description}}" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{title}}" />
    <meta name="twitter:description" content="{{description}}" />
    <link rel="stylesheet" href="/assets/style.css">
  </head>
  <body class="text-foreground">
    <div class="min-h-screen flex flex-col items-center py-12">
      <div class="w-full max-w-[640px] px-4 flex flex-col gap-10">
      
        <!-- Logo/Title -->
          <div class="text-center">
            <h1 class="font-semibold text-foreground mb-3 transition-all duration-300 {% if has_results %}text-3xl{% else %}text-5xl{% endif %} tracking-tight">
              Promptathon Showcase
            </h1>
          </div>

          <!-- Search Form -->
          <form method="GET" action="/"">
            <div class="relative flex items-center gap-2">
              <div class="relative flex-1">
                <div class="absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                </div>
                <input
                  type="text"
                  name="q"
                  value="{{query}}"
                  placeholder="Search apps..."
                  autocomplete="off"
                  class="w-full h-12 text-[15px] pl-12 pr-4 rounded-full border border-border bg-card text-foreground placeholder:text-muted-foreground focus:bg-secondary focus:border-primary transition-all focus:outline-none"
                  autofocus
                />
              </div>
            </div>
          </form>

      <!-- Search Results -->
      {% if has_results %}
      <div class="flex flex-col space-y-5">
        <div class="text-xs text-muted-foreground mb-5 font-medium">
          About {{result_count}} result{% if result_count != 1 %}s{% endif %}
        </div>

          {% for app in results %}
          <a href="/app/{{app.id}}?ref={{query}}" class="block group">
            {% if app.image_id %}
            <div class="flex gap-4 items-center">
              <div class="flex-shrink-0 w-52 h-28 rounded overflow-hidden bg-card">
                <img src="{{r2_public_url}}/{{app.image_id}}_200.jpg" alt="{{app.title}}" class="w-full h-full object-cover" loading="lazy" />
              </div>
              <div class="flex-1 min-w-0">
                {% if app.url %}
                <div class="text-xs text-muted-foreground mb-2 flex items-center gap-2 font-medium">
                  {{app.url}}
                </div>
                {% endif %}
                <div class="text-xl font-medium text-primary group-hover:text-primary/80 mb-2 transition-colors leading-snug">
                  {{app.title}}
                </div>
                <div class="text-muted-foreground text-sm leading-relaxed line-clamp-2">
                  {{app.description}}
                </div>
              </div>
            </div>
            {% else %}
            <div>
              {% if app.url %}
              <div class="text-xs text-muted-foreground mb-2 flex items-center gap-2 font-medium">
                {{app.url}}
              </div>
              {% endif %}
              <div class="text-xl font-medium text-primary group-hover:text-primary/80 mb-2 transition-colors leading-snug">
                {{app.title}}
              </div>
              <div class="text-muted-foreground text-sm leading-relaxed line-clamp-2">
                {{app.description}}
              </div>
            </div>
            {% endif %}
          </a>
          {% endfor %}
      </div>

      {% elif query %}
        <div class="text-center text-primary font-medium text-sm">
          No results found for "{{query}}"
        </div>
      {% endif %}

        <!-- Footer -->
        {% if not has_results %}
        <footer class="text-center text-muted-foreground text-xs mt-12">
          Running on the <a href="https://internetcomputer.org" class="underline text-primary" target="_blank">Internet Computer</a>
        </footer>
        {% endif %}
      </div>
    </div>
  </body>
</html>
